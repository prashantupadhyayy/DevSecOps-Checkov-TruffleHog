parameters:
  - name: workingDirectory
    type: string
  - name: serviceConnection
    type: string
  - name: backendRg
    type: string
  - name: backendStorage
    type: string
  - name: backendContainer
    type: string
  - name: backendKey
    type: string

steps:
  - task: TerraformInstaller@1
    displayName: "Install Terraform"
    inputs:
      terraformVersion: "latest"

  - task: TerraformTaskV4@4
    displayName: "Terraform Init"
    inputs:
      provider: "azurerm"
      command: "init"
      workingDirectory: ${{ parameters.workingDirectory }}
      backendServiceArm: ${{ parameters.serviceConnection }}
      backendAzureRmResourceGroupName: ${{ parameters.backendRg }}
      backendAzureRmStorageAccountName: ${{ parameters.backendStorage }}

      # ðŸ‘‡ directly use parameter values
      backendAzureRmContainerName: ${{ parameters.backendContainer }}
      backendAzureRmKey: ${{ parameters.backendKey }}